{"ast":null,"code":"import React,{useState}from\"react\";import{Header,InfoUserSaldo,InputField}from\"../components\";import{useNavigate,useLocation}from\"react-router-dom\";import{useDispatch,useSelector}from\"react-redux\";import{purchaseAction,resetPurchaseStatus}from\"../redux/actions/purchaseActions\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function PurchasePage(){const dispatch=useDispatch();const location=useLocation();const navigate=useNavigate();const{icons,textIcon,serviceFee,serviceCode}=location.state||{};const{loading,purchaseStatus}=useSelector(state=>state.purchase);const{token}=useSelector(state=>state.auth);const[confirmPurchase,setConfirmPurchase]=useState(false);const handleConfirm=()=>{dispatch(purchaseAction(serviceCode,token));setConfirmPurchase(false);};const handleCloseModal=()=>{if(purchaseStatus){dispatch(resetPurchaseStatus());}navigate(\"/homePage\");};return/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid vh-100\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-5\",children:[/*#__PURE__*/_jsx(InfoUserSaldo,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-5 container-fluid w-100 p-0\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"mb-3\",children:\"Pembayaran\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex gap-3 mb-5 align-items-center\",children:[/*#__PURE__*/_jsx(\"img\",{src:icons,className:\"img-fluid\",alt:textIcon,style:{maxWidth:30}}),/*#__PURE__*/_jsx(\"h5\",{children:textIcon})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"w-100\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-3\",children:/*#__PURE__*/_jsx(InputField,{type:\"text\",iconClass:\"fa fa-money\",value:serviceFee?parseInt(serviceFee).toLocaleString():\"\",placeholder:\"Masukkan nominal pembayaran\",isEdit:!false})}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger w-100\",disabled:loading,onClick:()=>setConfirmPurchase(true),children:\"Bayar\"})]})]})]}),(loading||confirmPurchase||purchaseStatus)&&/*#__PURE__*/_jsx(Modal,{loading:loading,confirmPurchase:confirmPurchase,purchaseStatus:purchaseStatus,textIcon:textIcon,serviceFee:serviceFee,onConfirm:handleConfirm,onCancel:()=>setConfirmPurchase(false),onNavigate:handleCloseModal})]});}function Modal(_ref){let{loading,confirmPurchase,purchaseStatus,textIcon,serviceFee,onConfirm,onCancel,onNavigate}=_ref;if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading-modal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"loading-spinner\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner-border text-danger\",role:\"status\",children:/*#__PURE__*/_jsx(\"span\",{className:\"visually-hidden\",children:\"Loading...\"})}),/*#__PURE__*/_jsx(\"p\",{children:\"Your purchase is processing...\"})]})});}if(confirmPurchase){return/*#__PURE__*/_jsx(\"div\",{className:\"loading-modal\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-column align-items-center p-4\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-credit-card-alt text-white bg-danger p-3 mb-3\",style:{borderRadius:\"50%\"}}),/*#__PURE__*/_jsxs(\"small\",{className:\"text-secondary\",children:[\"Bayar \",textIcon,\" senilai\"]}),/*#__PURE__*/_jsxs(\"h5\",{className:\"mb-4\",children:[\"Rp. \",serviceFee.toLocaleString(\"id-ID\")]}),/*#__PURE__*/_jsxs(\"div\",{className:\"gap-3 d-flex flex-column\",children:[/*#__PURE__*/_jsx(\"h6\",{className:\"text-danger small\",style:{cursor:\"pointer\"},onClick:onConfirm,children:\"Ya, Lanjutkan bayar\"}),/*#__PURE__*/_jsx(\"h6\",{className:\"text-secondary small\",style:{cursor:\"pointer\"},onClick:onCancel,children:\"Batalkan\"})]})]})})});}if(purchaseStatus){return/*#__PURE__*/_jsx(\"div\",{className:\"loading-modal\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-column align-items-center p-4\",children:[/*#__PURE__*/_jsx(\"i\",{className:`fa ${purchaseStatus===\"success\"?\"fa-check\":\"fa-close\"} text-white ${purchaseStatus===\"success\"?\"bg-success\":\"bg-danger\"} p-3 mb-3`,style:{borderRadius:\"50%\"}}),/*#__PURE__*/_jsxs(\"small\",{className:\"text-secondary\",children:[\"Pembayaran \",textIcon,\" sebesar\"]}),/*#__PURE__*/_jsxs(\"h5\",{className:\"h5\",children:[\"Rp. \",serviceFee.toLocaleString(\"id-ID\")]}),/*#__PURE__*/_jsx(\"small\",{className:\"text-secondary mb-4\",children:purchaseStatus===\"success\"?\"Berhasil\":\"Gagal\"}),/*#__PURE__*/_jsx(\"div\",{className:\"gap-3 d-flex flex-column\",children:/*#__PURE__*/_jsx(\"h6\",{className:\"text-secondary small\",style:{cursor:\"pointer\"},onClick:onNavigate,children:\"Kembali ke Beranda\"})})]})})});}return null;}export default PurchasePage;","map":{"version":3,"names":["React","useState","Header","InfoUserSaldo","InputField","useNavigate","useLocation","useDispatch","useSelector","purchaseAction","resetPurchaseStatus","jsx","_jsx","jsxs","_jsxs","PurchasePage","dispatch","location","navigate","icons","textIcon","serviceFee","serviceCode","state","loading","purchaseStatus","purchase","token","auth","confirmPurchase","setConfirmPurchase","handleConfirm","handleCloseModal","className","children","src","alt","style","maxWidth","type","iconClass","value","parseInt","toLocaleString","placeholder","isEdit","disabled","onClick","Modal","onConfirm","onCancel","onNavigate","_ref","role","borderRadius","cursor"],"sources":["C:/Users/arief/OneDrive/Documents/reactJS/sims_ppob-arief_febrian/src/pages/PurchasePage.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { Header, InfoUserSaldo, InputField } from \"../components\";\r\nimport { useNavigate, useLocation } from \"react-router-dom\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  purchaseAction,\r\n  resetPurchaseStatus,\r\n} from \"../redux/actions/purchaseActions\";\r\n\r\nfunction PurchasePage() {\r\n  const dispatch = useDispatch();\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n  const { icons, textIcon, serviceFee, serviceCode } = location.state || {};\r\n  const { loading, purchaseStatus } = useSelector((state) => state.purchase);\r\n  const { token } = useSelector((state) => state.auth);\r\n  const [confirmPurchase, setConfirmPurchase] = useState(false);\r\n\r\n  const handleConfirm = () => {\r\n    dispatch(purchaseAction(serviceCode, token));\r\n    setConfirmPurchase(false);\r\n  };\r\n\r\n  const handleCloseModal = () => {\r\n    if (purchaseStatus) {\r\n      dispatch(resetPurchaseStatus());\r\n    }\r\n    navigate(\"/homePage\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"container-fluid vh-100\">\r\n      <Header />\r\n      <div className=\"container mt-5\">\r\n        <InfoUserSaldo />\r\n        <div className=\"mt-5 container-fluid w-100 p-0\">\r\n          <h4 className=\"mb-3\">Pembayaran</h4>\r\n          <div className=\"d-flex gap-3 mb-5 align-items-center\">\r\n            <img\r\n              src={icons}\r\n              className=\"img-fluid\"\r\n              alt={textIcon}\r\n              style={{ maxWidth: 30 }}\r\n            />\r\n            <h5>{textIcon}</h5>\r\n          </div>\r\n          <div className=\"w-100\">\r\n            <div className=\"mb-3\">\r\n              <InputField\r\n                type=\"text\"\r\n                iconClass=\"fa fa-money\"\r\n                value={serviceFee ? parseInt(serviceFee).toLocaleString() : \"\"}\r\n                placeholder=\"Masukkan nominal pembayaran\"\r\n                isEdit={!false}\r\n              />\r\n            </div>\r\n            <button\r\n              className=\"btn btn-danger w-100\"\r\n              disabled={loading}\r\n              onClick={() => setConfirmPurchase(true)}\r\n            >\r\n              Bayar\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {(loading || confirmPurchase || purchaseStatus) && (\r\n        <Modal\r\n          loading={loading}\r\n          confirmPurchase={confirmPurchase}\r\n          purchaseStatus={purchaseStatus}\r\n          textIcon={textIcon}\r\n          serviceFee={serviceFee}\r\n          onConfirm={handleConfirm}\r\n          onCancel={() => setConfirmPurchase(false)}\r\n          onNavigate={handleCloseModal}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction Modal({\r\n  loading,\r\n  confirmPurchase,\r\n  purchaseStatus,\r\n  textIcon,\r\n  serviceFee,\r\n  onConfirm,\r\n  onCancel,\r\n  onNavigate,\r\n}) {\r\n  if (loading) {\r\n    return (\r\n      <div className=\"loading-modal\">\r\n        <div className=\"loading-spinner\">\r\n          <div className=\"spinner-border text-danger\" role=\"status\">\r\n            <span className=\"visually-hidden\">Loading...</span>\r\n          </div>\r\n          <p>Your purchase is processing...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (confirmPurchase) {\r\n    return (\r\n      <div className=\"loading-modal\">\r\n        <div className=\"loading-spinner\">\r\n          <div className=\"d-flex flex-column align-items-center p-4\">\r\n            <i\r\n              className=\"fa fa-credit-card-alt text-white bg-danger p-3 mb-3\"\r\n              style={{ borderRadius: \"50%\" }}\r\n            ></i>\r\n            <small className=\"text-secondary\">Bayar {textIcon} senilai</small>\r\n            <h5 className=\"mb-4\">Rp. {serviceFee.toLocaleString(\"id-ID\")}</h5>\r\n            <div className=\"gap-3 d-flex flex-column\">\r\n              <h6\r\n                className=\"text-danger small\"\r\n                style={{ cursor: \"pointer\" }}\r\n                onClick={onConfirm}\r\n              >\r\n                Ya, Lanjutkan bayar\r\n              </h6>\r\n              <h6\r\n                className=\"text-secondary small\"\r\n                style={{ cursor: \"pointer\" }}\r\n                onClick={onCancel}\r\n              >\r\n                Batalkan\r\n              </h6>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (purchaseStatus) {\r\n    return (\r\n      <div className=\"loading-modal\">\r\n        <div className=\"loading-spinner\">\r\n          <div className=\"d-flex flex-column align-items-center p-4\">\r\n            <i\r\n              className={`fa ${\r\n                purchaseStatus === \"success\" ? \"fa-check\" : \"fa-close\"\r\n              } text-white ${\r\n                purchaseStatus === \"success\" ? \"bg-success\" : \"bg-danger\"\r\n              } p-3 mb-3`}\r\n              style={{ borderRadius: \"50%\" }}\r\n            ></i>\r\n            <small className=\"text-secondary\">\r\n              Pembayaran {textIcon} sebesar\r\n            </small>\r\n            <h5 className=\"h5\">Rp. {serviceFee.toLocaleString(\"id-ID\")}</h5>\r\n            <small className=\"text-secondary mb-4\">\r\n              {purchaseStatus === \"success\" ? \"Berhasil\" : \"Gagal\"}\r\n            </small>\r\n            <div className=\"gap-3 d-flex flex-column\">\r\n              <h6\r\n                className=\"text-secondary small\"\r\n                style={{ cursor: \"pointer\" }}\r\n                onClick={onNavigate}\r\n              >\r\n                Kembali ke Beranda\r\n              </h6>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\nexport default PurchasePage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}